{% if auto_login_allowed %}
{# Auto-login mode: hide GLPI form, show SSO centered #}
<script>
(function() {
    const formColumn = document.querySelector('.row.justify-content-center .col-md-5');
    if (formColumn) {
        formColumn.style.display = 'none';
    }
})();
</script>
<div class="singlesignon-login" id="singlesignon-container">
    <h3 class="singlesignon-login-title text-center">{{ title }}</h3>
    <div class="singlesignon-login-buttons d-grid gap-2">
        {% for button in buttons %}
            <a class="btn btn-primary singlesignon-login-button" href="{{ button.href }}"
               {% if button.style %}style="{{ button.style }}"{% endif %}
               {% if button.popup %}data-singlesignon-popup="true"{% endif %}>
                {% if button.picture %}
                    <img src="{{ button.picture }}" alt="" class="singlesignon-login-picture"/>
                {% endif %}
                <span>{{ button.label }}</span>
            </a>
        {% endfor %}
    </div>
    <div class="singlesignon-login-classic text-center">
        <a class="btn btn-link" href="{{ classic_url }}">
            {{ classic_label }}
        </a>
    </div>
</div>
{% else %}
{# noAUTO=1 mode: show SSO above GLPI form #}
<script>
(function() {
    const container = document.getElementById('singlesignon-container');
    const formColumn = document.querySelector('.row.justify-content-center .col-md-5');
    const pluginColumn = container ? container.closest('.col-auto') : null;
    
    if (container && formColumn) {
        const header = formColumn.querySelector('.card-header');
        container.classList.add('mb-4');
        if (header) {
            formColumn.insertBefore(container, header);
        } else {
            formColumn.prepend(container);
        }
    }
    
    if (pluginColumn) {
        pluginColumn.style.display = 'none';
    }
})();
</script>
<div class="singlesignon-login" id="singlesignon-container">
    <h3 class="singlesignon-login-title text-center">{{ title }}</h3>
    <div class="singlesignon-login-buttons d-grid gap-2">
        {% for button in buttons %}
            <a class="btn btn-primary singlesignon-login-button" href="{{ button.href }}"
               {% if button.style %}style="{{ button.style }}"{% endif %}
               {% if button.popup %}data-singlesignon-popup="true"{% endif %}>
                {% if button.picture %}
                    <img src="{{ button.picture }}" alt="" class="singlesignon-login-picture"/>
                {% endif %}
                <span>{{ button.label }}</span>
            </a>
        {% endfor %}
    </div>
</div>
{% endif %}
